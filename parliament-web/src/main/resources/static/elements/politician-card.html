<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/paper-card/paper-card.html">

<dom-module name="politician-card">
	<template>
		<style>
			paper-card::shadow paper-material {
				height: auto;
			}
			
			.politician-card {
				width: 360px;
				margin-bottom: 20px;
				margin-left: 10px;
				margin-right: 10px;
			}
			
			.politician-card-content {
				margin: 0px;
			}
		</style>
		<paper-card heading="{{fullPoliticianName}}">
			<div class="card-content politician-card-content">
				<span>{{clubs}}</span>
			</div>
		</paper-card>
	</template>
	<script>
		Polymer({
			is: 'politician-card',

			properties: {
				politician: {
					type: Object
				},
				fullPoliticianName: {
					type: String,
					computed: 'computeFullPoliticianName(politician)'
				},
				clubs: {
					type: String,
					computed: 'computeClubs(politician)'
				}
			},
		
			computeFullPoliticianName: function(p) {
				return p.name.firstName + ' ' + p.name.surName;
			},
			
			computeClubs: function(p) {
				var distinctClubs = [];
				for (var i = 0; i < p.mandates.length; i++){
					if (p.mandates[i].club != null){
						if (distinctClubs.indexOf(p.mandates[i].club.shortName) == -1){
							distinctClubs.push(p.mandates[i].club.shortName);
						}
					}
				}
				
				var clubStr = '';
				for (var i = 0; i < distinctClubs.length; i++){
					if (i > 0){
						clubStr += ', ';
					}
					clubStr += distinctClubs[i];
				}
				
				return clubStr;
			}
		
		});
	</script>
</dom-module>