<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="politician-card.html">

<dom-module name="politician-cards-by-period">
	<template>
		<style>
			
		</style>
	
		<iron-ajax auto url="{{url}}" handle-as="json" last-response="{{politicians}}" />
		
		<div>
			<paper-input class="short" style="width: 300px"
					label="Show politicians for period" 
					type="number" value="{{selectedperiod}}">
	        </paper-input>
	    </div>
		
		<template is="dom-repeat" items="{{politicians}}">
			<politician-card politician="{{item}}" period="{{selectedperiod}}"></politician-card>
		</template>
	</template>
	<script>
		Polymer({
			is: 'politician-cards-by-period',
	
			properties: {
				politicians: {
					type: Object
				},
				selectedperiod: {
					type: Number,
					value: 25
				},
				url: {
					type: String,
					computed: 'computeUrl(selectedperiod)'
				}
			},
			
			computeUrl: function(selectedperiod) {
				return '/politician/period/' + selectedperiod + '.json';
			}
		});
	</script>
</dom-module>