<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-styles/color.html">
<link rel="import" href="../bower_components/progress-bubble/progress-bubble.html">

<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module name="start-page-content">
	<template>
		<style is="custom-style">
			.startPageCard {
				height: auto;
				margin-bottom: 20px;
				width: 100%;
			}
			
			.cardColumn {
				margin-left: 20px;
				float: left;
				width: 45%;
			}
			
			.section-title {
				margin-top: 30px;
				margin-bottom: 20px;
				color: #78909C;
			    font-size: 24px;
			    font-weight: 300;
			}
			
			paper-card::shadow paper-material {
				height: auto;
			}
			
			.absencePercentage {
		        --progress-bubble-stroke-color: rgba(255, 0, 0, 0.8);
		        --progress-bubble-bg-stroke-color: rgba(193, 193, 193, 0.2);
		        --progress-bubble-background-color: rgba(0, 0, 0, 1);
		        --progress-bubble-reflection-display: none;
		    }
		    
		    .sessionCount {
		        --progress-bubble-stroke-color: rgba(193, 193, 193, 0.2);
		        --progress-bubble-bg-stroke-color: rgba(193, 193, 193, 0.2);
		        --progress-bubble-background-color: rgba(0, 0, 0, 1);
		        --progress-bubble-reflection-display: none;
		    }
		    
		    .periodStats {
		    	@apply(--layout-horizontal);
		    	@apply(--center);
		    }
		</style>
		
		<iron-ajax auto url="/period/stats/latest.json" last-response="{{latestPeriodStats}}" />
		
		<div width="100%">
			<div class="cardColumn">
				<div class="section-title">General Analysis</div>
				<paper-card class="startPageCard" heading="Legislative Period Analysis">
					<div class="card-content">
						Here you can find general statistics of the different legislative periods.
						<br/><br/>
						Data from the <b><span>{{latestPeriodStats.period}}</span>. Period</b>:
						<br/>
						<div class="periodStats">
							<div style="text-align: center; width: 120px;">
								<progress-bubble class="absencePercentage" value="{{latestPeriodStats.absencePercentage}}" max="1">
								    <strong><span>{{latestPeriodAbsencePercentage}}</span>%</strong>
								</progress-bubble>
								Absence-Percentage
							</div>
							<div style="width: 120px; text-align: center;">
								<progress-bubble class="sessionCount" value="{{latestPeriodStats.absencePercentage}}" max="{{latestPeriodStats.absencePercentage}}">
								    <strong><span>{{latestPeriodStats.sessionCount}}</span></strong>
								</progress-bubble>
								Sessions
							</div>
						</div>
							
						
					</div>
					<div class="card-actions">
						<paper-button>Go to Period Analysis</paper-button>
					</div>
				</paper-card>
				<paper-card class="startPageCard" heading="Politician Analysis">
					<div class="card-content">
						Here you can see statistics for politicians of the Austrian Parliament like absences in sessions, 
						activity in the parliament, and politicians with similar or completely different attitudes.
					</div>
					<div class="card-actions">
						<a href="/politician-analysis.html">
							<paper-button>Go to Politician Analysis</paper-button>
						</a>
					</div>
				</paper-card>
			</div>
			<div class="cardColumn">
				<div class="section-title">Network Analysis</div>
				<paper-card class="startPageCard" heading="Parliament Club Network Analysis">
					<div class="card-content">
						The speeches of politicians to all topics were analyzed and the relations of
						parliament clubs were computed. These relations are shown in a network graph
						and you can see per period which clubs have the same attitudes.
						<br/><br/>
						Example: <br/>
						<img src="/img/club-network.png" style="width: 70%"/>
					</div>
					<div class="card-actions">
						<a href="/club-network-analysis.html">
							<paper-button>Go To Club Network Analysis</paper-button>
						</a>
					</div>
				</paper-card>
				<paper-card class="startPageCard" heading="Politician Network Analysis">
					<div class="card-content">
						The speeches of politicians to all topics were analyzed and the relations of
						politicians were computed. These relations are shown in a network graph
						and you can see per period which politicians have the same attitudes and
						course you can see to which clubs they belong.
					</div>
					<div class="card-actions">
						<a href="/politician-network-analysis.html">
							<paper-button>Go To Politician Network Analysis</paper-button>
						</a>
					</div>
				</paper-card>
			</div>
		</div>
	</template>
	<script>
		Polymer({
			is: 'start-page-content',
	
			properties: {
				latestPeriodStats: Object,
				latestPeriodAbsencePercentage: {
					type: String,
					computed: 'computedLatestPeriodAbsencePercentage(latestPeriodStats)'
				}
			},
		
			computedLatestPeriodAbsencePercentage: function(latestPeriodStats) {
				return (latestPeriodStats.absencePercentage * 100).toFixed(2);
			}
		});
	</script>
</dom-module>